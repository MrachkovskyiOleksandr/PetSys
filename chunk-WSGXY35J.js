import{a as f,b as h}from"./chunk-CNHDNY63.js";import{d as $}from"./chunk-AUTYEGHN.js";import{$ as F,Ca as D,G as s,Ga as H,J as a,K as u,L as k,O as w,Pa as q,Q as v,S as m,Sa as R,U as o,V as n,Va as x,W as y,Z as P,_ as p,ab as B,ca as I,db as N,f as l,gb as A,ha as c,ia as E,ja as O,nb as L,ob as V,pa as C,pb as Y,qa as j,ra as T,s as g,wb as _,x as S,y as b,z as M}from"./chunk-YJCDLP6F.js";var G=(()=>{class r{constructor(e,i,t,d,Q){this._translate=e,this._petrecordService=i,this._alert=t,this._form=d,this._core=Q,this.load=new M,this.form=this._form.getForm("petrecord",f)}update(e){this._form.modal(this.form,[],e).then(i=>{this._core.copy(i,e),this._petrecordService.update(e);let t=this._petrecordService.doc(e._id);this._core.copy(i,t)})}delete(e){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this petrecord?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>l(this,null,function*(){this._petrecordService.delete(e).subscribe(()=>{this.load.emit()})})}]})}static{this.\u0275fac=function(i){return new(i||r)(a(L),a(h),a(A),a(_),a(B))}}static{this.\u0275cmp=u({type:r,selectors:[["app-history"]],inputs:{record:"record"},outputs:{load:"load"},standalone:!1,decls:14,vars:9,consts:[[1,"documents-card"],[1,"documents-card-description",3,"routerLink"],[1,"documents__title"],[1,"documents__description"],[1,"documents-card-buttons"],[1,"material-icons",3,"click"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"a",1)(2,"div")(3,"div",2),c(4),n(),o(5,"div",3),c(6),C(7,"mongodate"),C(8,"date"),n()()(),o(9,"div",4)(10,"span",5),p("click",function(){return t.update(t.record)}),c(11,"edit"),n(),o(12,"span",5),p("click",function(){return t.delete(t.record)}),c(13,"delete"),n()()()),i&2&&(s(),I("routerLink","/pethistorypage/",t.record._id,""),s(3),E(t.record.name),s(2),O(" ",T(8,6,j(7,4,t.record._id),"d MMMM y")," "))},dependencies:[R,H,N],encapsulation:2})}}return r})();function te(r,K){if(r&1){let e=P();o(0,"div",15)(1,"app-history",16),p("load",function(){S(e);let t=F();return b(t.load())}),n()()}if(r&2){let e=K.$implicit;s(),v("record",e)}}var J=(()=>{class r{constructor(e,i,t){this._petrecordService=e,this._route=i,this._form=t,this.records=[],this.isMenuOpen=!1,this.pet_id="",this.form=this._form.getForm("petrecord",f),this._route.paramMap.subscribe(d=>{this.pet_id=d.get("pet_id")||"",this.load()})}create(){this._form.modal(this.form,{label:"Create",click:(e,i)=>l(this,null,function*(){i(),this._preCreate(e),this._petrecordService.create(e).subscribe(()=>{this.load()})})})}load(){this._petrecordService.get({page:1,query:this._query()}).subscribe(e=>{this.records.splice(0,this.records.length),this.records.push(...e)})}_query(){let e="";return this.pet_id&&(e+=(e?"&":"")+"pet="+this.pet_id),e}_preCreate(e){delete e.__created,this.pet_id&&(e.pet=this.pet_id)}static{this.\u0275fac=function(i){return new(i||r)(a(h),a(q),a(_))}}static{this.\u0275cmp=u({type:r,selectors:[["ng-component"]],standalone:!1,decls:19,vars:9,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar-content"],[1,"documents-sidebar__img"],["src","assets/default.png","alt",""],[1,"documents-sidebar__title"],["translate",""],[3,"click"],[1,"documents-main"],[1,"documents-main-content"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],[3,"load","record"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p("click",function(){return t.isMenuOpen=!t.isMenuOpen}),y(4,"div",4),n(),o(5,"div",5)(6,"div",6)(7,"div",7),y(8,"img",8),n(),o(9,"div",9)(10,"span",10),c(11,"Record.Records"),n()(),o(12,"div")(13,"wbutton",11),p("click",function(){return t.create()}),o(14,"span",10),c(15,"Button.Create"),n()()()()(),o(16,"div",12)(17,"div",13),w(18,te,2,1,"div",14),n()()()()()),i&2&&(m("documents-wrapper--open",t.isMenuOpen),s(3),m("burger-wrap--open",t.isMenuOpen),s(),m("burger--close",t.isMenuOpen),s(),m("documents-sidebar--open",t.isMenuOpen),s(13),v("ngForOf",t.records))},dependencies:[V,D,Y,G],encapsulation:2})}}return r})();var ie=[{path:":pet_id",component:J}],Se=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=k({type:r})}static{this.\u0275inj=g({imports:[x.forChild(ie),$]})}}return r})();export{Se as PethistoryModule};
