import{a as S}from"./chunk-BYI4KDEW.js";import{a as C}from"./chunk-JC3YLUXG.js";import{a as U}from"./chunk-HKK6XGAR.js";import{a as B}from"./chunk-CW6TRPPC.js";import{a as j}from"./chunk-QMLXWTAL.js";import{d as D}from"./chunk-AUTYEGHN.js";import{Ca as I,Cb as q,E as w,G as r,J as p,K as f,L as P,O as k,Q as d,S as h,Sa as E,U as n,V as a,Va as L,W as _,_ as m,ab as b,ca as v,gb as F,ha as u,ia as T,nb as g,ob as O,pb as A,rb as N,s as M,wb as y}from"./chunk-YJCDLP6F.js";var z=(()=>{class o{constructor(t,i,e,s,l){this._petService=t,this._form=i,this._core=e,this._alert=s,this._translate=l,this.apiUrl=B.url,this.form=this._form.getForm("pet",S)}update(t){this._form.modal(this.form,[],t).then(i=>{this._core.copy(i,t),this._petService.update(t)})}delete(t){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this pet?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._petService.delete(t)}}]})}static{this.\u0275fac=function(i){return new(i||o)(p(C),p(y),p(b),p(F),p(g))}}static{this.\u0275cmp=f({type:o,selectors:[["app-pet"]],inputs:{pet:"pet"},standalone:!1,decls:17,vars:9,consts:[[1,"documents-card"],[3,"routerLink"],["alt","Pet photo",1,"documents__img",3,"src"],[1,"documents-card-description",3,"routerLink"],[1,"documents__title"],[1,"documents__description"],[1,"documents-card-buttons"],[1,"nav__burger-link",3,"routerLink"],[1,"material-icons"],[1,"material-icons",3,"click"],[1,"material-icons","delete-button",3,"click"]],template:function(i,e){i&1&&(n(0,"div",0)(1,"a",1),_(2,"img",2),a(),n(3,"a",3)(4,"div")(5,"div",4),u(6),a(),n(7,"div",5),u(8),a()()(),n(9,"div",6)(10,"a",7)(11,"span",8),u(12,"article"),a()(),n(13,"span",9),m("click",function(){return e.update(e.pet)}),u(14,"edit"),a(),n(15,"span",10),m("click",function(){return e.delete(e.pet)}),u(16,"delete"),a()()()),i&2&&(r(),v("routerLink","/petprofile/",e.pet._id,""),r(),d("src",e.apiUrl+e.pet.thumb,w),r(),v("routerLink","/petprofile/",e.pet._id,""),r(3),T(e.pet.name),r(2),T(e.pet.description),r(2),v("routerLink","/pethistory/",e.pet._id,""))},dependencies:[E],encapsulation:2})}}return o})();function W(o,Y){if(o&1&&(n(0,"div",18),_(1,"app-pet",19),a()),o&2){let t=Y.$implicit;r(),d("pet",t)}}var G=(()=>{class o{constructor(t,i,e,s,l,$){this._userService=t,this._petService=i,this._form=e,this._core=s,this._petallergyService=l,this.translateService=$,this.mypets=[],this.speciesList=[],this.breedList=[],this.isMenuOpen=!1,this.species="",this.breed="",this.gender="",this.adoptable="",this.search="",this.genderList=[{_id:"Male",name:this.getTranslatedText("Pet.Male")},{_id:"Female",name:this.getTranslatedText("Pet.Female")}],this.adoptableList=[{_id:"Adoptable",name:this.getTranslatedText("Pet.Is adoptable")},{_id:"Not adoptable",name:this.getTranslatedText("Pet.Not adoptable")}],this.form=this._form.getForm("pet",S),this._core.onComplete("pet_loaded").then(()=>{this.mypets=this._petService.petsByAuthor[this._userService.user._id],this.speciesList=[...new Set(this.mypets.map(c=>c.species))].map(c=>({_id:c,name:this.getTranslatedText("Pet."+c)})),this.breedList=[...new Set(this.mypets.map(c=>c.breed))].map(c=>({_id:c,name:this.getTranslatedText("Pet."+c)}))})}setSearch(t){this.search=t||""}getTranslatedText(t){return this.translateService.translate(t)}create(){this._form.modal(this.form,{label:"Create",click:(t,i)=>{this._petService.create(t),i()}})}load(){this._petService.get({query:this._query()}).subscribe(t=>{this.mypets.splice(0,this.mypets.length),this.mypets.push(...t)})}_query(){let t="";return this.species&&(t+=(t?"&":"")+"species="+this.species),this.breed&&(t+=(t?"&":"")+"breed="+this.breed),this.gender&&(t+=(t?"&":"")+"gender="+this.gender),this.adoptable&&(this.adoptable==="Adoptable"?t+=(t?"&":"")+"adoptable=true":t+=(t?"&":"")+"adoptable=false"),this.search&&(t+=(t?"&":"")+"search="+this.search),t}static{this.\u0275fac=function(i){return new(i||o)(p(j),p(C),p(y),p(b),p(U),p(g))}}static{this.\u0275cmp=f({type:o,selectors:[["ng-component"]],standalone:!1,decls:24,vars:27,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar-content"],[1,"documents-sidebar__title"],["translate",""],[1,"documents-sidebar-button","documents-sidebar-content-buttons"],[3,"click"],[3,"modelChange","placeholder","items","clearable","searchable"],[3,"modelChange","placeholder","items","clearable"],[3,"modelChange","placeholderSearch","placeholder","items","clearable"],[3,"wChange","wSubmit","placeholder","type","clearable"],[1,"documents-main"],[1,"documents-main-content"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],[3,"pet"]],template:function(i,e){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m("click",function(){return e.isMenuOpen=!e.isMenuOpen}),_(4,"div",4),a(),n(5,"div",5)(6,"div",6)(7,"div",7)(8,"span",8),u(9,"Pet.My Pets"),a()(),n(10,"div",9)(11,"wbutton",10),m("click",function(){return e.create()}),n(12,"span",8),u(13,"Button.Create"),a()()(),n(14,"div")(15,"wselect",11),m("modelChange",function(l){return e.species=l,e.load()}),a(),n(16,"wselect",11),m("modelChange",function(l){return e.breed=l,e.load()}),a(),n(17,"wselect",12),m("modelChange",function(l){return e.gender=l,e.load()}),a(),n(18,"wselect",13),m("modelChange",function(l){return e.adoptable=l,e.load()}),a()(),n(19,"div")(20,"winput",14),m("wChange",function(l){return e.setSearch(l)})("wSubmit",function(){return e.load()}),a()()()(),n(21,"div",15)(22,"div",16),k(23,W,2,1,"div",17),a()()()()()),i&2&&(h("documents-wrapper--open",e.isMenuOpen),r(3),h("burger-wrap--open",e.isMenuOpen),r(),h("burger--close",e.isMenuOpen),r(),h("documents-sidebar--open",e.isMenuOpen),r(10),d("placeholder",e.getTranslatedText("Pet.Species"))("items",e.speciesList)("clearable",!0)("searchable",!0),r(),d("placeholder",e.getTranslatedText("Pet.Breed"))("items",e.breedList)("clearable",!0)("searchable",!0),r(),d("placeholder",e.getTranslatedText("Pet.Gender"))("items",e.genderList)("clearable",!0),r(),d("placeholderSearch",e.getTranslatedText("Common.Search"))("placeholder",e.getTranslatedText("Pet.Adoptable"))("items",e.adoptableList)("clearable",!0),r(2),d("placeholder",e.getTranslatedText("Common.Enter text..."))("type","search")("clearable",!0),r(3),d("ngForOf",e.mypets))},dependencies:[O,q,I,A,N,z],encapsulation:2})}}return o})();var X=[{path:"",component:G}],_e=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=P({type:o})}static{this.\u0275inj=M({imports:[L.forChild(X),D]})}}return o})();export{_e as MypetsModule};
