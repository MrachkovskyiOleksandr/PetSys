import{a as Z}from"./chunk-CW6TRPPC.js";import{a as M}from"./chunk-X6I76JIS.js";import{a as j}from"./chunk-GE6HJUL3.js";import{a as F}from"./chunk-HZCNNJ5Y.js";import{a as P}from"./chunk-QMLXWTAL.js";import{d as X}from"./chunk-AUTYEGHN.js";import{$ as f,Ca as Y,Cb as D,Da as T,Db as W,E as B,G as c,J as s,K as h,L as R,O as v,Q as a,S as C,Sa as $,U as r,V as n,Va as G,W as y,Z as g,_ as l,ab as I,ca as L,f as w,gb as H,ha as d,ia as U,nb as E,ob as J,pb as K,rb as Q,s as q,w as A,wb as k,x as u,y as _,z as b}from"./chunk-YJCDLP6F.js";var O=(()=>{class o{get items(){return this._petclinicService.petclinics}constructor(e){this._petclinicService=e,this.wChange=new b}ngOnChanges(e){e.value&&!e.value.firstChange&&(this.value=e.value.currentValue)}static{this.\u0275fac=function(i){return new(i||o)(s(M))}}static{this.\u0275cmp=h({type:o,selectors:[["petclinic-selector"]],inputs:{value:"value",placeholder:"placeholder"},outputs:{wChange:"wChange"},features:[A],decls:1,vars:4,consts:[[3,"modelChange","placeholder","select","items","clearable"]],template:function(i,t){i&1&&(r(0,"wselect",0),l("modelChange",function(p){return t.wChange.emit(p)}),n()),i&2&&a("placeholder",t.placeholder)("select",t.value)("items",t.items)("clearable",!0)},dependencies:[W,D],encapsulation:2})}}return o})();function pe(o,V){if(o&1){let e=g();r(0,"div",7)(1,"span",8),l("click",function(){u(e);let t=f();return _(t.update(t.doctor))}),d(2,"edit"),n(),r(3,"span",9),l("click",function(){u(e);let t=f();return _(t.delete(t.doctor))}),d(4,"delete"),n()()}}var ee=(()=>{class o{constructor(e,i,t,m,p,z){this._translate=e,this._petdoctorService=i,this._alert=t,this._form=m,this._core=p,this.us=z,this.load=new b,this.apiUrl=Z.url,this.form=this._form.getForm("petdoctor",j)}update(e){this._form.modal(this.form,[],e).then(i=>{this._core.copy(i,e),this._petdoctorService.update(e);let t=this._petdoctorService.doc(e._id);this._core.copy(i,t)})}delete(e){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this petrecord?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>w(this,null,function*(){this._petdoctorService.delete(e).subscribe(()=>{this.load.emit()})})}]})}static{this.\u0275fac=function(i){return new(i||o)(s(E),s(F),s(H),s(k),s(I),s(P))}}static{this.\u0275cmp=h({type:o,selectors:[["app-doctor"]],inputs:{doctor:"doctor"},outputs:{load:"load"},standalone:!1,decls:10,vars:8,consts:[[1,"documents-card"],[3,"routerLink"],["alt","Doctor photo",1,"documents__img",3,"src"],[1,"documents-card-description",3,"routerLink"],[1,"documents__title"],[1,"documents__description"],["class","documents-card-buttons",4,"ngIf"],[1,"documents-card-buttons"],[1,"material-icons",3,"click"],[1,"material-icons","delete-button",3,"click"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"a",1),y(2,"img",2),n(),r(3,"a",3)(4,"div")(5,"div",4),d(6),n(),r(7,"div",5),d(8),n()()(),v(9,pe,5,0,"div",6),n()),i&2&&(c(),L("routerLink","/petdoctorpage/",t.doctor._id,""),c(),a("src",t.doctor.thumb?t.apiUrl+t.doctor.thumb:"assets/default.png",B),c(),L("routerLink","/petdoctorpage/",t.doctor._id,""),c(3),U(t.doctor.name),c(2),U(t.doctor.specialization),c(),a("ngIf",t.us.role("admin")))},dependencies:[$,T],encapsulation:2})}}return o})();function de(o,V){if(o&1){let e=g();r(0,"div")(1,"wbutton",16),l("click",function(){u(e);let t=f();return _(t.create())}),r(2,"span",8),d(3,"Button.Create"),n()()()}}function ue(o,V){if(o&1){let e=g();r(0,"div",17)(1,"app-doctor",18),l("load",function(){u(e);let t=f();return _(t.load())}),n()()}if(o&2){let e=V.$implicit;c(),a("doctor",e)}}var N=(()=>{class o{constructor(e,i,t,m,p,z){this._userService=e,this._petdoctorService=i,this._form=t,this._petclinicService=m,this._core=p,this.translateService=z,this.doctors=[],this.clinics=[],this.specializationList=[],this.isMenuOpen=!1,this.clinic_id="",this.specialization="",this.search="",this.form=this._form.getForm("petdoctor",j),this.load(),this.selectorsLoad(),this._core.onComplete("petdoctor_loaded").then(()=>{this.specializationList=[...new Set(this.doctors.map(S=>S.specialization))].map(S=>({_id:S,name:this.getTranslatedText("Doctor."+S)}))})}setSearch(e){this.search=e||""}getTranslatedText(e){return this.translateService.translate(e)}create(){this._form.modal(this.form,{label:"Create",click:(e,i)=>w(this,null,function*(){i(),this._preCreate(e),this._petdoctorService.create(e).subscribe(()=>{this.load()})})})}load(){this._petdoctorService.get({query:this._query()},{name:"public"}).subscribe(e=>{this.doctors.splice(0,this.doctors.length),this.doctors.push(...e)})}selectorsLoad(){this._petclinicService.get({},{name:"public"}).subscribe(e=>{this.clinics.splice(0,this.clinics.length),this.clinics.push(...e)})}_preCreate(e){delete e.__created}_query(){let e="";return this.clinic_id&&(e+=(e?"&":"")+"clinic="+this.clinic_id),this.specialization&&(e+=(e?"&":"")+"specialization="+this.specialization),this.search&&(e+=(e?"&":"")+"search="+this.search),e}static{this.\u0275fac=function(i){return new(i||o)(s(P),s(F),s(k),s(M),s(I),s(E))}}static{this.\u0275cmp=h({type:o,selectors:[["ng-component"]],standalone:!1,decls:18,vars:19,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar-content"],[1,"documents-sidebar__title"],["translate",""],[4,"ngIf"],[3,"wChange","placeholder","value"],[3,"modelChange","placeholder","items","clearable","searchable"],[3,"wChange","wSubmit","placeholder","type","clearable"],[1,"documents-main"],[1,"documents-main-content"],["class","documents-main-row",4,"ngFor","ngForOf"],[3,"click"],[1,"documents-main-row"],[3,"load","doctor"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),l("click",function(){return t.isMenuOpen=!t.isMenuOpen}),y(4,"div",4),n(),r(5,"div",5)(6,"div",6)(7,"div",7)(8,"span",8),d(9,"Doctor.Pet Doctors"),n()(),v(10,de,4,0,"div",9),r(11,"div")(12,"petclinic-selector",10),l("wChange",function(p){return t.clinic_id=p,t.load()}),n(),r(13,"wselect",11),l("modelChange",function(p){return t.specialization=p,t.load()}),n(),r(14,"winput",12),l("wChange",function(p){return t.setSearch(p)})("wSubmit",function(){return t.load()}),n()()()(),r(15,"div",13)(16,"div",14),v(17,ue,2,1,"div",15),n()()()()()),i&2&&(C("documents-wrapper--open",t.isMenuOpen),c(3),C("burger-wrap--open",t.isMenuOpen),c(),C("burger--close",t.isMenuOpen),c(),C("documents-sidebar--open",t.isMenuOpen),c(5),a("ngIf",t._userService.role("admin")),c(2),a("placeholder",t.getTranslatedText("Clinic.Select petclinic"))("value",t.clinic_id),c(),a("placeholder",t.getTranslatedText("Doctor.Select specialization"))("items",t.specializationList)("clearable",!0)("searchable",!0),c(),a("placeholder",t.getTranslatedText("Common.Enter text..."))("type","search")("clearable",!0),c(3),a("ngForOf",t.doctors))},dependencies:[J,D,Y,T,K,Q,O,ee],encapsulation:2})}}return o})();var _e=[{path:"",component:N},{path:":clinic_id",component:N}],qe=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=R({type:o})}static{this.\u0275inj=q({imports:[G.forChild(_e),X,O]})}}return o})();export{qe as PetdoctorsModule};
